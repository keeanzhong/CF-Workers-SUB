/**
 * æç®€æ¢é’ˆ v1.0
 * ç”¨äºæ£€æµ‹ç¯å¢ƒæ˜¯å¦æ­£å¸¸ï¼Œæ’é™¤è¯­æ³•å†²çª
 */
export default {
  async fetch(request, env, ctx) {
    // 1. æ£€æµ‹ KV æ˜¯å¦å­˜åœ¨
    const hasKV = !!env.KV;
    
    // 2. æ£€æµ‹ Token æ˜¯å¦å­˜åœ¨
    const tokenVal = env.TOKEN || "æœªè®¾ç½®";

    // 3. è¾“å‡ºè¯Šæ–­æŠ¥å‘Š
    const text = `
    === è¯Šæ–­æŠ¥å‘Š ===
    âœ… Worker æ ¸å¿ƒå·²å¯åŠ¨ (ä¸å†æŠ¥ 1101)
    -----------------------------
    ğŸ“¦ KV æ•°æ®åº“çŠ¶æ€: ${hasKV ? "âœ… å·²ç»‘å®š (å˜é‡å: KV)" : "âŒ æœªæ‰¾åˆ° (è¯·æ£€æŸ¥åå°ç»‘å®š)"}
    ğŸ”‘ Token å˜é‡: ${tokenVal}
    -----------------------------
    
    æ—¢ç„¶ä½ èƒ½çœ‹åˆ°è¿™ä¸ªé¡µé¢ï¼Œè¯´æ˜ç½‘ç»œé€šäº†ï¼Œä»£ç æ ¼å¼ä¹Ÿæ˜¯å¯¹çš„ã€‚
    æ¥ä¸‹æ¥çš„é—®é¢˜å°±æ˜¯æŠŠåŠŸèƒ½åŠ å›å»ã€‚
    `;

    return new Response(text, {
      headers: { "content-type": "text/plain; charset=utf-8" }
    });
  }
};
